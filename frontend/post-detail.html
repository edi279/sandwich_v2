<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; img-src 'self' data: https:; font-src 'self' https://cdn.jsdelivr.net; connect-src 'self' https://cdn.jsdelivr.net;">
<title>ê²Œì‹œê¸€ ìƒì„¸ - ìƒŒë“œìœ„ì¹˜ëƒ ëƒ </title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<style>
body {
  background-color: #f8f9fa;
  margin: 0;
  padding: 0;
}

.main-container {
  display: flex;
  min-height: 100vh;
}

/* ì¢Œì¸¡ LNB (Left Navigation Bar) */
.lnb {
  position: fixed;
  left: 0;
  top: 0;
  height: 100vh;
  width: 80px;
  background-color: #ffffff;
  border-right: 1px solid #e9ecef;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 2rem 0;
  gap: 1.5rem;
  z-index: 100;
}

.lnb-button {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  border: none;
  background-color: #ffe0e6;
  color: #333;
  font-size: 1.3rem;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.lnb-button:hover {
  background-color: #ffd1dc;
  transform: scale(1.05);
}

.lnb-button.active {
  background-color: #ffb3c1;
}

/* ë©”ì¸ ì»¨í…ì¸  ì˜ì—­ */
.main-content {
  margin-left: 80px;
  flex: 1;
  padding: 2rem;
}

/* ë’¤ë¡œê°€ê¸° ë²„íŠ¼ */
.back-button {
  margin-bottom: 1.5rem;
  background: none;
  border: none;
  color: #6c757d;
  font-size: 1rem;
  cursor: pointer;
  padding: 0.5rem 0;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  transition: color 0.2s;
}

.back-button:hover {
  color: #333;
}

/* ê²Œì‹œê¸€ ìƒì„¸ ì»¨í…Œì´ë„ˆ */
.detail-container {
  background-color: #ffffff;
  border-radius: 12px;
  padding: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}

/* ì¹´í…Œê³ ë¦¬ */
.post-category {
  display: inline-block;
  padding: 0.4rem 1rem;
  border-radius: 20px;
  background-color: #ffe0e6;
  color: #ff6b9d;
  font-size: 0.9rem;
  font-weight: 500;
  margin-bottom: 1rem;
}

/* ì œëª© */
.post-title {
  font-size: 2rem;
  font-weight: bold;
  color: #333;
  margin-bottom: 1.5rem;
  line-height: 1.4;
}

/* ë©”íƒ€ ì •ë³´ (ì‘ì„±ì, ì‘ì„±ì¼, ì¡°íšŒìˆ˜) */
.post-meta {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  padding-bottom: 1.5rem;
  border-bottom: 1px solid #e9ecef;
  margin-bottom: 2rem;
  flex-wrap: wrap;
}

.post-meta-left {
  display: flex;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.post-meta-right {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-left: auto;
}

.author-info {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.author-profile {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background-color: #9ab7cb;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: bold;
  font-size: 1rem;
}

.author-name {
  font-size: 1rem;
  color: #333;
  font-weight: 500;
}

.meta-divider {
  color: #dee2e6;
}

.meta-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: #6c757d;
  font-size: 0.9rem;
}

.meta-item-icon {
  font-size: 1rem;
}

/* ë³¸ë¬¸ ë‚´ìš© */
.post-content {
  font-size: 1rem;
  line-height: 1.8;
  color: #333;
  margin-bottom: 2rem;
  min-height: 200px;
}

.post-content img {
  max-width: 100%;
  height: auto;
  border-radius: 8px;
  margin: 1rem 0;
}

.post-content iframe {
  max-width: 100%;
  border-radius: 8px;
  margin: 1rem 0;
}

/* íƒœê·¸ ì„¹ì…˜ */
.post-tags {
  padding-top: 1.5rem;
  border-top: 1px solid #e9ecef;
}

.tags-label {
  font-size: 0.9rem;
  color: #6c757d;
  margin-bottom: 0.75rem;
  font-weight: 500;
}

.tag-list {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.tag-badge {
  display: inline-block;
  padding: 0.4rem 0.8rem;
  background-color: #f0f0f0;
  color: #333;
  border-radius: 20px;
  font-size: 0.85rem;
}

/* ì´ë¯¸ì§€ ì„¹ì…˜ (ë ˆì‹œí”¼ìš©) */
.post-image-section {
  margin-bottom: 2rem;
  text-align: center;
}

.post-image {
  max-width: 100%;
  max-height: 500px;
  border-radius: 12px;
  object-fit: contain;
}

/* ë¡œë”© ë° ì—ëŸ¬ */
.loading {
  text-align: center;
  padding: 3rem;
  color: #6c757d;
}

.error {
  text-align: center;
  padding: 3rem;
  color: #dc3545;
}

/* ë°˜ì‘í˜• */
@media (max-width: 768px) {
  .lnb {
    width: 60px;
    padding: 1rem 0;
  }

  .lnb-button {
    width: 44px;
    height: 44px;
    font-size: 1.2rem;
  }

  .main-content {
    margin-left: 60px;
    padding: 1rem;
  }

  .detail-container {
    padding: 1.5rem;
  }

  .post-title {
    font-size: 1.5rem;
  }

  .post-meta {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.75rem;
  }
  
  .post-meta-right {
    align-self: flex-end;
    margin-left: 0;
  }

  .meta-divider {
    display: none;
  }
}

@media (max-width: 480px) {
  .post-title {
    font-size: 1.25rem;
  }

  .author-profile {
    width: 32px;
    height: 32px;
    font-size: 0.85rem;
  }
}

/* ëŒ“ê¸€ ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
.comments-section {
  background-color: #ffffff;
  border-radius: 12px;
  padding: 2rem;
  margin-top: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}

.comments-header {
  font-size: 1.25rem;
  font-weight: bold;
  color: #333;
  margin-bottom: 1.5rem;
  padding-bottom: 0.75rem;
  border-bottom: 2px solid #ffe0e6;
}

.comments-count {
  color: #ff6b9d;
  margin-left: 0.5rem;
}

/* ëŒ“ê¸€ ì‘ì„± í¼ */
.comment-form {
  margin-bottom: 2rem;
  padding: 1.5rem;
  background-color: #f8f9fa;
  border-radius: 8px;
}

.comment-form-header {
  font-size: 1rem;
  font-weight: 500;
  color: #333;
  margin-bottom: 1rem;
}

.comment-input-group {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.comment-author-input {
  padding: 0.75rem;
  border: 1px solid #dee2e6;
  border-radius: 6px;
  font-size: 0.95rem;
  outline: none;
  transition: border-color 0.2s;
}

.comment-author-input:focus {
  border-color: #ff6b9d;
}

.comment-textarea {
  padding: 0.75rem;
  border: 1px solid #dee2e6;
  border-radius: 6px;
  font-size: 0.95rem;
  outline: none;
  resize: vertical;
  min-height: 100px;
  font-family: inherit;
  transition: border-color 0.2s;
}

.comment-textarea:focus {
  border-color: #ff6b9d;
}

.comment-form-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 0.5rem;
}

.comment-char-count {
  font-size: 0.85rem;
  color: #6c757d;
}

.comment-submit-btn {
  padding: 0.6rem 1.5rem;
  background-color: #ff6b9d;
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 0.95rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s;
}

.comment-submit-btn:hover {
  background-color: #ff5588;
}

.comment-submit-btn:disabled {
  background-color: #dee2e6;
  cursor: not-allowed;
}

/* ëŒ“ê¸€ ëª©ë¡ */
.comments-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.comment-item {
  padding: 1.25rem;
  background-color: #f8f9fa;
  border-radius: 8px;
  transition: background-color 0.2s;
}

.comment-item:hover {
  background-color: #f1f3f5;
}

.comment-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 0.75rem;
}

.comment-author-info {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.comment-author-profile {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background-color: #9ab7cb;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: bold;
  font-size: 0.9rem;
  flex-shrink: 0;
}

.comment-author-details {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.comment-author-name {
  font-size: 0.95rem;
  font-weight: 500;
  color: #333;
}

.comment-meta {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.85rem;
  color: #6c757d;
}

.comment-index {
  color: #ff6b9d;
  font-weight: 500;
}

.comment-actions {
  display: flex;
  gap: 0.5rem;
}

.comment-action-btn {
  padding: 0.4rem 0.8rem;
  background: none;
  border: 1px solid #dee2e6;
  border-radius: 4px;
  font-size: 0.85rem;
  color: #6c757d;
  cursor: pointer;
  transition: all 0.2s;
}

.comment-action-btn:hover {
  border-color: #ff6b9d;
  color: #ff6b9d;
}

.comment-action-btn.delete {
  border-color: #dc3545;
  color: #dc3545;
}

.comment-action-btn.delete:hover {
  background-color: #dc3545;
  color: white;
}

.comment-content {
  font-size: 0.95rem;
  line-height: 1.6;
  color: #333;
  white-space: pre-wrap;
  word-break: break-word;
}

.comment-edit-form {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  margin-top: 0.75rem;
}

.comment-edit-textarea {
  padding: 0.75rem;
  border: 1px solid #ff6b9d;
  border-radius: 6px;
  font-size: 0.95rem;
  outline: none;
  resize: vertical;
  min-height: 80px;
  font-family: inherit;
}

.comment-edit-actions {
  display: flex;
  gap: 0.5rem;
  justify-content: flex-end;
}

.comment-save-btn,
.comment-cancel-btn {
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 4px;
  font-size: 0.9rem;
  cursor: pointer;
  transition: all 0.2s;
}

.comment-save-btn {
  background-color: #ff6b9d;
  color: white;
}

.comment-save-btn:hover {
  background-color: #ff5588;
}

.comment-cancel-btn {
  background-color: #e9ecef;
  color: #333;
}

.comment-cancel-btn:hover {
  background-color: #dee2e6;
}

.no-comments {
  text-align: center;
  padding: 3rem;
  color: #6c757d;
  font-size: 0.95rem;
}

/* ë°˜ì‘í˜• */
@media (max-width: 768px) {
  .comments-section {
    padding: 1.5rem;
  }

  .comment-form {
    padding: 1rem;
  }

  .comment-item {
    padding: 1rem;
  }

  .comment-header {
    flex-direction: column;
    gap: 0.75rem;
  }

  .comment-actions {
    align-self: flex-start;
  }
}
</style>
</head>
<body>
<div class="main-container">
  <!-- ì¢Œì¸¡ LNB -->
  <nav class="lnb">
    <button class="lnb-button" id="recipeBtn" title="ì´ë ‡ê²Œ ë§Œë“¤ì–´ìš”" onclick="window.location.href='/board.html?board=1'">
      ğŸ¥ª
    </button>
    <button class="lnb-button" id="tipBtn" title="ì •ë³´ ê³µìœ í•´ìš”" onclick="window.location.href='/board.html?board=2'">
      ğŸ’¡
    </button>
  </nav>

  <!-- ë©”ì¸ ì»¨í…ì¸  -->
  <main class="main-content">
    <!-- ë’¤ë¡œê°€ê¸° ë²„íŠ¼ -->
    <button class="back-button" id="backToListBtn">
      <span>â†</span>
      <span>ëª©ë¡ìœ¼ë¡œ</span>
    </button>

    <!-- ê²Œì‹œê¸€ ìƒì„¸ ì»¨í…Œì´ë„ˆ -->
    <div class="detail-container" id="detailContainer">
      <div class="loading" id="loading">ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
      <div class="error" id="error" style="display: none;"></div>
      
      <!-- ê²Œì‹œê¸€ ë‚´ìš© (ë™ì ìœ¼ë¡œ ìƒì„±) -->
      <div id="postContent" style="display: none;">
        <div class="post-category" id="postCategory"></div>
        <div class="post-image-section" id="postImageSection" style="display: none;">
          <img class="post-image" id="postImage" alt="ê²Œì‹œê¸€ ì´ë¯¸ì§€">
        </div>
        <h1 class="post-title" id="postTitle"></h1>
        <div class="post-meta">
          <div class="post-meta-left">
            <div class="author-info">
              <div class="author-profile" id="authorProfile"></div>
              <span class="author-name" id="authorName"></span>
            </div>
            <span class="meta-divider">|</span>
            <div class="meta-item">
              <span class="meta-item-icon">ğŸ“…</span>
              <span id="postDate"></span>
            </div>
            <span class="meta-divider">|</span>
            <div class="meta-item">
              <span class="meta-item-icon">ğŸ‘ï¸</span>
              <span id="postViews"></span>
            </div>
          </div>
          <!-- ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ -->
          <div class="post-meta-right">
            <button class="btn btn-outline-primary" id="editPostBtn" style="padding: 0.4rem 1rem; font-size: 0.9rem;">
              ìˆ˜ì •
            </button>
            <button class="btn btn-outline-danger" id="deletePostBtn" style="padding: 0.4rem 1rem; font-size: 0.9rem;">
              ì‚­ì œ
            </button>
          </div>
        </div>
        <div class="post-content" id="postContentBody"></div>
        <div class="post-tags" id="postTagsSection" style="display: none;">
          <div class="tags-label">íƒœê·¸</div>
          <div class="tag-list" id="tagList"></div>
        </div>
      </div>
    </div>

    <!-- ëŒ“ê¸€ ì„¹ì…˜ -->
    <div class="comments-section" id="commentsSection" style="display: none;">
      <div class="comments-header">
        ëŒ“ê¸€<span class="comments-count" id="commentsCount">(0)</span>
      </div>

      <!-- ëŒ“ê¸€ ì‘ì„± í¼ -->
      <div class="comment-form">
        <div class="comment-form-header">ëŒ“ê¸€ ì‘ì„±</div>
        <div class="comment-input-group">
          <input 
            type="text" 
            class="comment-author-input" 
            id="commentAuthorInput" 
            placeholder="ì‘ì„±ì ì´ë¦„" 
            maxlength="50"
          >
          <textarea 
            class="comment-textarea" 
            id="commentTextarea" 
            placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš” (ìµœëŒ€ 1000ì)" 
            maxlength="1000"
          ></textarea>
          <div class="comment-form-footer">
            <span class="comment-char-count">
              <span id="commentCharCount">0</span> / 1000
            </span>
            <button class="comment-submit-btn" id="commentSubmitBtn">ëŒ“ê¸€ ì‘ì„±</button>
          </div>
        </div>
      </div>

      <!-- ëŒ“ê¸€ ëª©ë¡ -->
      <div class="comments-list" id="commentsList">
        <div class="no-comments">ì•„ì§ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤. ì²« ëŒ“ê¸€ì„ ë‚¨ê²¨ë³´ì„¸ìš”!</div>
      </div>
    </div>

    <!-- Footer -->
    <div id="site-footer" class="mt-5"></div>
  </main>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script>
// URL íŒŒë¼ë¯¸í„°ì—ì„œ type(MENU_ID)ê³¼ id ê°€ì ¸ì˜¤ê¸°
const urlParams = new URLSearchParams(window.location.search);
const postType = urlParams.get('type'); // '1' (ë ˆì‹œí”¼) or '2' (ì •ë³´ ê³µìœ ) - MENU_TBì˜ MENU_ID
const postId = urlParams.get('id');

// ê²Œì‹œê¸€ ì •ë³´ ì €ì¥ (ëª©ë¡ìœ¼ë¡œ ì´ë™ ì‹œ ì‚¬ìš©)
let currentPostData = {
  boardId: postType, // MENU_ID
  categoryId: null, // ì¹´í…Œê³ ë¦¬ëŠ” ê²Œì‹œê¸€ ë¡œë“œ í›„ ì„¤ì •
  createdAt: null // í˜ì´ì§€ ê³„ì‚°ìš©
};

// DOM ìš”ì†Œ
const loading = document.getElementById('loading');
const error = document.getElementById('error');
const postContent = document.getElementById('postContent');
const detailContainer = document.getElementById('detailContainer');

// ê²Œì‹œê¸€ ë¡œë“œ
async function loadPost() {
  if (!postType || !postId) {
    showError('ì˜ëª»ëœ ìš”ì²­ì…ë‹ˆë‹¤.');
    return;
  }

  try {
    // MENU_ID 1 = ë ˆì‹œí”¼ ê²Œì‹œíŒ, MENU_ID 2 = ì •ë³´ ê³µìœ  ê²Œì‹œíŒ
    const apiUrl = postType === '1' 
      ? `/api/recipes/${postId}`
      : `/api/tips/${postId}`;
    
    const response = await fetch(apiUrl);
    const result = await response.json();

    if (!result.success) {
      showError(result.message || 'ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
      return;
    }

    const data = result.data;
    console.log('ê²Œì‹œê¸€ ë°ì´í„° ì „ì²´:', data); // ë””ë²„ê¹…ìš©
    console.log('ê²Œì‹œê¸€ ë°ì´í„° í‚¤ ëª©ë¡:', Object.keys(data)); // ë””ë²„ê¹…ìš©
    console.log('CONTENT ê°’:', data.CONTENT); // ë””ë²„ê¹…ìš©
    console.log('CONTENT íƒ€ì…:', typeof data.CONTENT); // ë””ë²„ê¹…ìš©
    console.log('CONTENT ì¡´ì¬ ì—¬ë¶€:', data.CONTENT !== null && data.CONTENT !== undefined); // ë””ë²„ê¹…ìš©
    
    // ëª¨ë“  í‚¤ë¥¼ í™•ì¸í•˜ì—¬ CONTENTì™€ ìœ ì‚¬í•œ í‚¤ ì°¾ê¸°
    const contentKeys = Object.keys(data).filter(key => key.toLowerCase().includes('content'));
    console.log('CONTENT ê´€ë ¨ í‚¤ë“¤:', contentKeys); // ë””ë²„ê¹…ìš©
    
    displayPost(data);
  } catch (err) {
    console.error('ê²Œì‹œê¸€ ë¡œë“œ ì˜¤ë¥˜:', err);
    showError('ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
  }
}

// ê²Œì‹œê¸€ í‘œì‹œ
function displayPost(data) {
  // ê²Œì‹œê¸€ ì •ë³´ ì €ì¥ (ëª©ë¡ìœ¼ë¡œ ì´ë™ ì‹œ ì‚¬ìš©)
  currentPostData.categoryId = data.CATEGORY || null;
  currentPostData.createdAt = data.CREATED_AT || null;
  
  // ì¹´í…Œê³ ë¦¬
  const categoryEl = document.getElementById('postCategory');
  if (data.CATEGORY_NAME) {
    categoryEl.textContent = data.CATEGORY_NAME;
    categoryEl.style.display = 'inline-block';
  } else {
    categoryEl.style.display = 'none';
  }

  // ì´ë¯¸ì§€ (ë ˆì‹œí”¼ë§Œ - MENU_ID 1)
  if (postType === '1' && data.IMAGE_URL) {
    const imageSection = document.getElementById('postImageSection');
    const imageEl = document.getElementById('postImage');
    imageEl.src = data.IMAGE_URL;
    imageEl.onerror = function() {
      imageSection.style.display = 'none';
    };
    imageSection.style.display = 'block';
  } else {
    document.getElementById('postImageSection').style.display = 'none';
  }

  // ì œëª©
  document.getElementById('postTitle').textContent = data.TITLE || 'ì œëª© ì—†ìŒ';

  // ì‘ì„±ì í”„ë¡œí•„ ì•„ì´ì½˜ (ì´ë¦„ì˜ ì²« ê¸€ì)
  const authorName = data.AUTHOR_NAME || 'ìµëª…';
  const authorProfile = document.getElementById('authorProfile');
  authorProfile.textContent = authorName.charAt(0).toUpperCase();
  document.getElementById('authorName').textContent = authorName;

  // ì‘ì„±ì¼
  const createdAt = data.CREATED_AT_FORMATTED || 
    new Date(data.CREATED_AT).toLocaleDateString('ko-KR', {
      year: 'numeric',
      month: '2-digit',
      day: '2-digit',
      hour: '2-digit',
      minute: '2-digit'
    }).replace(/\. /g, '.').replace(/\.$/, '');
  document.getElementById('postDate').textContent = createdAt;

  // ì¡°íšŒìˆ˜
  const views = data.VIEWS ? data.VIEWS.toLocaleString() : '0';
  document.getElementById('postViews').textContent = views;

  // ë³¸ë¬¸ ë‚´ìš©
  const contentBody = document.getElementById('postContentBody');
  
  // CONTENT ì»¬ëŸ¼ ì°¾ê¸° (ëª¨ë“  ê°€ëŠ¥í•œ í‚¤ ì‹œë„)
  let content = null;
  if (data.CONTENT !== null && data.CONTENT !== undefined) {
    content = data.CONTENT;
  } else if (data.content !== null && data.content !== undefined) {
    content = data.content;
  } else if (data.Content !== null && data.Content !== undefined) {
    content = data.Content;
  } else {
    // ëª¨ë“  í‚¤ë¥¼ í™•ì¸í•˜ì—¬ CONTENTì™€ ìœ ì‚¬í•œ í‚¤ ì°¾ê¸°
    const contentKey = Object.keys(data).find(key => 
      key.toLowerCase() === 'content' || 
      key.toLowerCase().includes('content')
    );
    if (contentKey) {
      content = data[contentKey];
      console.log('CONTENTë¥¼ ë‹¤ë¥¸ í‚¤ì—ì„œ ì°¾ìŒ:', contentKey, content);
    }
  }
  
  // CONTENTê°€ null, undefined, ë¹ˆ ë¬¸ìì—´ì´ ì•„ë‹Œ ê²½ìš°ì—ë§Œ í‘œì‹œ
  if (content !== null && content !== undefined && String(content).trim() !== '') {
    console.log('CONTENT í‘œì‹œ:', content.substring(0, 100) + '...');
    contentBody.innerHTML = content;
  } else {
    console.error('âš ï¸ CONTENTë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ëª¨ë“  ë°ì´í„° í‚¤:', Object.keys(data));
    console.error('âš ï¸ ì „ì²´ ë°ì´í„°:', data);
    contentBody.innerHTML = '<p style="color: #6c757d;">ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
  }

  // íƒœê·¸
  const tagsSection = document.getElementById('postTagsSection');
  const tagList = document.getElementById('tagList');
  if (data.TAGS && data.TAGS.trim()) {
    const tags = data.TAGS.split(',').map(tag => tag.trim()).filter(tag => tag);
    if (tags.length > 0) {
      tagList.innerHTML = '';
      tags.forEach(tag => {
        const tagBadge = document.createElement('span');
        tagBadge.className = 'tag-badge';
        tagBadge.textContent = `#${tag}`;
        tagList.appendChild(tagBadge);
      });
      tagsSection.style.display = 'block';
    } else {
      tagsSection.style.display = 'none';
    }
  } else {
    tagsSection.style.display = 'none';
  }

  // ë¡œë”© ìˆ¨ê¸°ê³  ë‚´ìš© í‘œì‹œ
  loading.style.display = 'none';
  postContent.style.display = 'block';
}

// ì—ëŸ¬ í‘œì‹œ
function showError(message) {
  loading.style.display = 'none';
  error.style.display = 'block';
  error.textContent = message;
}

// ============================================================
// ëŒ“ê¸€ ê´€ë ¨ í•¨ìˆ˜ë“¤
// ============================================================
let currentUserName = ''; // í˜„ì¬ ì‚¬ìš©ì ì´ë¦„ ì €ì¥ (ì‘ì„±ì í™•ì¸ìš©)

// ëŒ“ê¸€ ëª©ë¡ ë¡œë“œ
async function loadComments() {
  if (!postType || !postId) return;
  
  try {
    const response = await fetch(`/api/comments?postType=${postType}&postId=${postId}`);
    const result = await response.json();
    
    if (!result.success) {
      console.error('ëŒ“ê¸€ ë¡œë“œ ì‹¤íŒ¨:', result.message);
      return;
    }
    
    displayComments(result.data);
    document.getElementById('commentsCount').textContent = `(${result.count})`;
  } catch (error) {
    console.error('ëŒ“ê¸€ ë¡œë“œ ì˜¤ë¥˜:', error);
  }
}

// ëŒ“ê¸€ ëª©ë¡ í‘œì‹œ
function displayComments(comments) {
  const commentsList = document.getElementById('commentsList');
  
  if (comments.length === 0) {
    commentsList.innerHTML = '<div class="no-comments">ì•„ì§ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤. ì²« ëŒ“ê¸€ì„ ë‚¨ê²¨ë³´ì„¸ìš”!</div>';
    return;
  }
  
  commentsList.innerHTML = '';
  
  comments.forEach(comment => {
    const commentItem = createCommentElement(comment);
    commentsList.appendChild(commentItem);
  });
}

// ëŒ“ê¸€ ìš”ì†Œ ìƒì„±
function createCommentElement(comment) {
  const div = document.createElement('div');
  div.className = 'comment-item';
  div.dataset.commentId = comment.COMMENT_ID;
  
  const isDeleted = comment.DELETED_YN === 'Y';
  const authorInitial = comment.AUTHOR_NAME.charAt(0).toUpperCase();
  const isEdited = new Date(comment.CREATED_AT).getTime() !== new Date(comment.UPDATED_AT).getTime();
  
  // XSS ë°©ì§€ë¥¼ ìœ„í•´ HTML ì´ìŠ¤ì¼€ì´í”„
  const escapeHtml = (text) => {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
  };
  
  const escapedContent = escapeHtml(comment.CONTENT);
  const escapedAuthorName = escapeHtml(comment.AUTHOR_NAME);
  
  // ì‚­ì œëœ ëŒ“ê¸€ì¸ ê²½ìš°
  if (isDeleted) {
    div.innerHTML = `
      <div class="comment-header">
        <div class="comment-author-info">
          <div class="comment-author-profile" style="background-color: #dee2e6;">?</div>
          <div class="comment-author-details">
            <div class="comment-author-name" style="color: #adb5bd;">ì‚­ì œëœ ì‚¬ìš©ì</div>
            <div class="comment-meta">
              <span class="comment-index">#${comment.COMMENT_INDEX}</span>
              <span>â€¢</span>
              <span>${comment.CREATED_AT_FORMATTED}</span>
            </div>
          </div>
        </div>
      </div>
      <div class="comment-content" style="color: #adb5bd; font-style: italic;">ì‚­ì œëœ ëŒ“ê¸€ì…ë‹ˆë‹¤.</div>
    `;
  } else {
    // ì •ìƒ ëŒ“ê¸€
    div.innerHTML = `
      <div class="comment-header">
        <div class="comment-author-info">
          <div class="comment-author-profile">${authorInitial}</div>
          <div class="comment-author-details">
            <div class="comment-author-name">${escapedAuthorName}</div>
            <div class="comment-meta">
              <span class="comment-index">#${comment.COMMENT_INDEX}</span>
              <span>â€¢</span>
              <span>${comment.CREATED_AT_FORMATTED}</span>
              ${isEdited ? '<span>â€¢ (ìˆ˜ì •ë¨)</span>' : ''}
            </div>
          </div>
        </div>
        <div class="comment-actions">
          <button class="comment-action-btn edit-btn" data-comment-id="${comment.COMMENT_ID}" data-author-name="${escapedAuthorName}">ìˆ˜ì •</button>
          <button class="comment-action-btn delete delete-btn" data-comment-id="${comment.COMMENT_ID}" data-author-name="${escapedAuthorName}">ì‚­ì œ</button>
        </div>
      </div>
      <div class="comment-content" data-original-content="${escapedContent.replace(/"/g, '&quot;')}">${escapedContent}</div>
    `;
    
    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€ (ì •ìƒ ëŒ“ê¸€ì—ë§Œ)
    div.querySelector('.edit-btn').addEventListener('click', function() {
      editComment(this.dataset.commentId, this.dataset.authorName);
    });
    
    div.querySelector('.delete-btn').addEventListener('click', function() {
      deleteComment(this.dataset.commentId, this.dataset.authorName);
    });
  }
  
  return div;
}

// ëŒ“ê¸€ ì‘ì„±
async function submitComment() {
  const authorInput = document.getElementById('commentAuthorInput');
  const contentTextarea = document.getElementById('commentTextarea');
  const authorName = authorInput.value.trim();
  const content = contentTextarea.value.trim();
  
  if (!authorName) {
    alert('ì‘ì„±ì ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
    authorInput.focus();
    return;
  }
  
  if (!content) {
    alert('ëŒ“ê¸€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
    contentTextarea.focus();
    return;
  }
  
  if (content.length > 1000) {
    alert('ëŒ“ê¸€ì€ ìµœëŒ€ 1000ìê¹Œì§€ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
    return;
  }
  
  try {
    const response = await fetch('/api/comments', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        postType,
        postId,
        content,
        authorName
      })
    });
    
    const result = await response.json();
    
    if (!result.success) {
      alert(result.message || 'ëŒ“ê¸€ ì‘ì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
      return;
    }
    
    // ì‘ì„±ì ì´ë¦„ ì €ì¥
    currentUserName = authorName;
    
    // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
    contentTextarea.value = '';
    document.getElementById('commentCharCount').textContent = '0';
    
    // ëŒ“ê¸€ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
    await loadComments();
    
    alert('ëŒ“ê¸€ì´ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.');
  } catch (error) {
    console.error('ëŒ“ê¸€ ì‘ì„± ì˜¤ë¥˜:', error);
    alert('ëŒ“ê¸€ ì‘ì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
  }
}

// ëŒ“ê¸€ ìˆ˜ì • ëª¨ë“œë¡œ ì „í™˜
function editComment(commentId, authorName) {
  // ì‘ì„±ì í™•ì¸ (ê°„ë‹¨í•œ í™•ì¸, ì¶”í›„ ì¸ì¦ ì‹œìŠ¤í…œìœ¼ë¡œ ë³´ì™„)
  const inputName = prompt(`ëŒ“ê¸€ì„ ìˆ˜ì •í•˜ì‹œë ¤ë©´ ì‘ì„±ì ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”:\n\n(íŒíŠ¸: ${authorName})`);
  
  if (!inputName) return;
  
  if (inputName !== authorName) {
    alert('ì‘ì„±ì ì´ë¦„ì´ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
    return;
  }
  
  const commentItem = document.querySelector(`[data-comment-id="${commentId}"]`);
  const contentElement = commentItem.querySelector('.comment-content');
  const originalContent = contentElement.dataset.originalContent;
  const actionsElement = commentItem.querySelector('.comment-actions');
  
  // HTML ì´ìŠ¤ì¼€ì´í”„ í•´ì œ
  const unescapeHtml = (text) => {
    const textarea = document.createElement('textarea');
    textarea.innerHTML = text;
    return textarea.value;
  };
  
  const decodedContent = unescapeHtml(originalContent);
  
  // ìˆ˜ì • í¼ ìƒì„±
  const editForm = document.createElement('div');
  editForm.className = 'comment-edit-form';
  
  const textarea = document.createElement('textarea');
  textarea.className = 'comment-edit-textarea';
  textarea.maxLength = 1000;
  textarea.value = decodedContent;
  
  const editActions = document.createElement('div');
  editActions.className = 'comment-edit-actions';
  
  const saveBtn = document.createElement('button');
  saveBtn.className = 'comment-save-btn';
  saveBtn.textContent = 'ì €ì¥';
  saveBtn.onclick = () => saveComment(commentId, authorName);
  
  const cancelBtn = document.createElement('button');
  cancelBtn.className = 'comment-cancel-btn';
  cancelBtn.textContent = 'ì·¨ì†Œ';
  cancelBtn.onclick = () => cancelEdit(commentId);
  
  editActions.appendChild(saveBtn);
  editActions.appendChild(cancelBtn);
  editForm.appendChild(textarea);
  editForm.appendChild(editActions);
  
  // ê¸°ì¡´ ë‚´ìš© ìˆ¨ê¸°ê³  ìˆ˜ì • í¼ í‘œì‹œ
  contentElement.style.display = 'none';
  actionsElement.style.display = 'none';
  contentElement.parentNode.appendChild(editForm);
  
  // í…ìŠ¤íŠ¸ ì˜ì—­ í¬ì»¤ìŠ¤
  textarea.focus();
}

// ëŒ“ê¸€ ìˆ˜ì • ì·¨ì†Œ
function cancelEdit(commentId) {
  const commentItem = document.querySelector(`[data-comment-id="${commentId}"]`);
  const contentElement = commentItem.querySelector('.comment-content');
  const actionsElement = commentItem.querySelector('.comment-actions');
  const editForm = commentItem.querySelector('.comment-edit-form');
  
  contentElement.style.display = 'block';
  actionsElement.style.display = 'flex';
  editForm.remove();
}

// ëŒ“ê¸€ ì €ì¥
async function saveComment(commentId, authorName) {
  const commentItem = document.querySelector(`[data-comment-id="${commentId}"]`);
  const editForm = commentItem.querySelector('.comment-edit-form');
  const textarea = editForm.querySelector('textarea');
  const newContent = textarea.value.trim();
  
  if (!newContent) {
    alert('ëŒ“ê¸€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
    textarea.focus();
    return;
  }
  
  if (newContent.length > 1000) {
    alert('ëŒ“ê¸€ì€ ìµœëŒ€ 1000ìê¹Œì§€ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
    return;
  }
  
  try {
    const response = await fetch(`/api/comments/${commentId}`, {
      method: 'PUT',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        content: newContent,
        authorName
      })
    });
    
    const result = await response.json();
    
    if (!result.success) {
      alert(result.message || 'ëŒ“ê¸€ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
      return;
    }
    
    // ëŒ“ê¸€ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
    await loadComments();
    
    alert('ëŒ“ê¸€ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');
  } catch (error) {
    console.error('ëŒ“ê¸€ ìˆ˜ì • ì˜¤ë¥˜:', error);
    alert('ëŒ“ê¸€ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
  }
}

// ëŒ“ê¸€ ì‚­ì œ
async function deleteComment(commentId, authorName) {
  // ì‘ì„±ì í™•ì¸
  const inputName = prompt(`ëŒ“ê¸€ì„ ì‚­ì œí•˜ì‹œë ¤ë©´ ì‘ì„±ì ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”:\n\n(íŒíŠ¸: ${authorName})`);
  
  if (!inputName) return;
  
  if (inputName !== authorName) {
    alert('ì‘ì„±ì ì´ë¦„ì´ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
    return;
  }
  
  if (!confirm('ì •ë§ë¡œ ì´ ëŒ“ê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
    return;
  }
  
  try {
    const response = await fetch(`/api/comments/${commentId}`, {
      method: 'DELETE',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        authorName
      })
    });
    
    const result = await response.json();
    
    if (!result.success) {
      alert(result.message || 'ëŒ“ê¸€ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
      return;
    }
    
    // ëŒ“ê¸€ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
    await loadComments();
    
    alert('ëŒ“ê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
  } catch (error) {
    console.error('ëŒ“ê¸€ ì‚­ì œ ì˜¤ë¥˜:', error);
    alert('ëŒ“ê¸€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
  }
}

// ëŒ“ê¸€ ê¸€ì ìˆ˜ ì¹´ìš´í„° ì—…ë°ì´íŠ¸
function updateCharCount() {
  const textarea = document.getElementById('commentTextarea');
  const charCount = document.getElementById('commentCharCount');
  charCount.textContent = textarea.value.length;
}

// ëª©ë¡ìœ¼ë¡œ ì´ë™ (í•´ë‹¹ ê²Œì‹œíŒê³¼ ì¹´í…Œê³ ë¦¬ë¡œ ì´ë™)
async function goBackToList() {
  if (!currentPostData.boardId) {
    // ê²Œì‹œíŒ ì •ë³´ê°€ ì—†ìœ¼ë©´ ì´ì „ í˜ì´ì§€ë¡œ
    window.history.back();
    return;
  }
  
  try {
    // í•´ë‹¹ ê²Œì‹œê¸€ì´ ëª‡ í˜ì´ì§€ì— ìˆëŠ”ì§€ ê³„ì‚°
    let targetPage = 1;
    
    if (currentPostData.categoryId && postId) {
      // í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì—ì„œ ê²Œì‹œê¸€ì˜ ìœ„ì¹˜ ê³„ì‚°
      const limit = currentPostData.boardId === '1' ? 20 : 10; // ë ˆì‹œí”¼: 20ê°œ/í˜ì´ì§€, ì •ë³´ ê³µìœ : 10ê°œ/í˜ì´ì§€
      const apiUrl = currentPostData.boardId === '1' 
        ? `/api/recipes?category=${currentPostData.categoryId}&limit=${limit}`
        : `/api/tips?category=${currentPostData.categoryId}&limit=${limit}`;
      
      try {
        // ì²« í˜ì´ì§€ë¶€í„° ìˆœíšŒí•˜ë©´ì„œ í•´ë‹¹ ê²Œì‹œê¸€ ì°¾ê¸°
        const firstPageResponse = await fetch(`${apiUrl}&page=1`);
        const firstPageResult = await firstPageResponse.json();
        
        if (firstPageResult.success && firstPageResult.pagination) {
          const totalPages = firstPageResult.pagination.totalPages;
          const postIdField = currentPostData.boardId === '1' ? 'RECIPE_ID' : 'TIP_ID';
          
          // ê° í˜ì´ì§€ë¥¼ í™•ì¸í•˜ì—¬ í•´ë‹¹ ê²Œì‹œê¸€ ì°¾ê¸°
          for (let page = 1; page <= totalPages && page <= 10; page++) { // ìµœëŒ€ 10í˜ì´ì§€ê¹Œì§€ë§Œ í™•ì¸
            const pageResponse = await fetch(`${apiUrl}&page=${page}`);
            const pageResult = await pageResponse.json();
            
            if (pageResult.success && pageResult.data) {
              const foundIndex = pageResult.data.findIndex(post => post[postIdField] == postId);
              
              if (foundIndex !== -1) {
                targetPage = page;
                break;
              }
            }
          }
        }
      } catch (error) {
        console.warn('í˜ì´ì§€ ê³„ì‚° ì‹¤íŒ¨, ì²« í˜ì´ì§€ë¡œ ì´ë™:', error);
        targetPage = 1;
      }
    }
    
    // ê²Œì‹œíŒ ëª©ë¡ìœ¼ë¡œ ì´ë™
    const params = new URLSearchParams();
    params.set('board', currentPostData.boardId);
    if (currentPostData.categoryId) {
      params.set('category', currentPostData.categoryId);
    }
    if (targetPage > 1) {
      params.set('page', targetPage);
    }
    
    window.location.href = `/board.html?${params.toString()}`;
  } catch (error) {
    console.error('ëª©ë¡ìœ¼ë¡œ ì´ë™ ì˜¤ë¥˜:', error);
    // ì˜¤ë¥˜ ë°œìƒ ì‹œ ê¸°ë³¸ ê²Œì‹œíŒìœ¼ë¡œ ì´ë™
    const params = new URLSearchParams();
    params.set('board', currentPostData.boardId);
    if (currentPostData.categoryId) {
      params.set('category', currentPostData.categoryId);
    }
    window.location.href = `/board.html?${params.toString()}`;
  }
}

// ê²Œì‹œê¸€ ìˆ˜ì •
function editPost() {
  if (!postType || !postId) {
    alert('ê²Œì‹œê¸€ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    return;
  }
  
  // post-editor.htmlë¡œ ì´ë™í•˜ë©´ì„œ postIdì™€ postType ì „ë‹¬
  window.location.href = `/post-editor.html?postId=${postId}&postType=${postType}`;
}

// ê²Œì‹œê¸€ ì‚­ì œ
async function deletePost() {
  if (!postType || !postId) {
    alert('ê²Œì‹œê¸€ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    return;
  }
  
  if (!confirm('ì •ë§ë¡œ ì´ ê²Œì‹œê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì‚­ì œëœ ê²Œì‹œê¸€ì€ ëª©ë¡ì—ì„œ í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.')) {
    return;
  }
  
  try {
    // MENU_ID 1 = ë ˆì‹œí”¼ ê²Œì‹œíŒ, MENU_ID 2 = ì •ë³´ ê³µìœ  ê²Œì‹œíŒ
    const apiUrl = postType === '1' 
      ? `/api/recipes/${postId}`
      : `/api/tips/${postId}`;
    
    const response = await fetch(apiUrl, {
      method: 'DELETE',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        authorName: '' // í•„ìš”ì‹œ ì‘ì„±ì ì´ë¦„ í™•ì¸ ì¶”ê°€ ê°€ëŠ¥
      })
    });
    
    const result = await response.json();
    
    if (!result.success) {
      alert(result.message || 'ê²Œì‹œê¸€ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
      return;
    }
    
    alert('ê²Œì‹œê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
    
    // ê²Œì‹œíŒ ëª©ë¡ìœ¼ë¡œ ì´ë™ (postTypeì´ ì´ë¯¸ MENU_ID)
    window.location.href = `/board.html?board=${postType}`;
  } catch (error) {
    console.error('ê²Œì‹œê¸€ ì‚­ì œ ì˜¤ë¥˜:', error);
    alert('ê²Œì‹œê¸€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
  }
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ ê²Œì‹œê¸€ ë¶ˆëŸ¬ì˜¤ê¸°
document.addEventListener('DOMContentLoaded', async function() {
  await loadPost();
  
  // ê²Œì‹œê¸€ ë¡œë“œ í›„ ëŒ“ê¸€ ì„¹ì…˜ í‘œì‹œ ë° ëŒ“ê¸€ ë¡œë“œ
  document.getElementById('commentsSection').style.display = 'block';
  await loadComments();
  
  // ëŒ“ê¸€ ì‘ì„± ë²„íŠ¼ ì´ë²¤íŠ¸
  document.getElementById('commentSubmitBtn').addEventListener('click', submitComment);
  
  // ëŒ“ê¸€ ê¸€ì ìˆ˜ ì¹´ìš´í„°
  document.getElementById('commentTextarea').addEventListener('input', updateCharCount);
  
  // ì—”í„°í‚¤ë¡œ ëŒ“ê¸€ ì‘ì„± (Shift+EnterëŠ” ì¤„ë°”ê¿ˆ)
  document.getElementById('commentTextarea').addEventListener('keydown', function(e) {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      submitComment();
    }
  });
  
  // ê²Œì‹œê¸€ ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ ì´ë²¤íŠ¸
  document.getElementById('editPostBtn').addEventListener('click', editPost);
  document.getElementById('deletePostBtn').addEventListener('click', deletePost);
  
  // ëª©ë¡ìœ¼ë¡œ ë²„íŠ¼ ì´ë²¤íŠ¸
  document.getElementById('backToListBtn').addEventListener('click', goBackToList);
  
  // Footer ë¡œë“œ
  fetch('/footer.html')
    .then(res => res.text())
    .then(html => {
      const footer = document.getElementById('site-footer');
      if (footer) {
        footer.innerHTML = html;
      }
    })
    .catch(err => console.error('Footer ë¡œë“œ ì‹¤íŒ¨:', err));
});
</script>
</body>
</html>

